(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tablecategorie"],{"2fdb":function(t,e,i){"use strict";var a=i("5ca1"),s=i("d2c8"),o="includes";a(a.P+a.F*i("5147")(o),"String",{includes:function(t){return!!~s(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,i){var a=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[a]=!1,!"/./"[t](e)}catch(s){}}return!0}},6762:function(t,e,i){"use strict";var a=i("5ca1"),s=i("c366")(!0);a(a.P,"Array",{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},8065:function(t,e,i){},a77d:function(t,e,i){"use strict";var a=i("8065"),s=i.n(a);s.a},aae3:function(t,e,i){var a=i("d3f4"),s=i("2d95"),o=i("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==s(t))}},bfbd:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("title-bar",{attrs:{"title-stack":t.titleStack}}),i("section",{staticClass:"section is-main-section"},[i("div",{staticClass:"card"},[i("header",{staticClass:"card-header"},[i("div",{staticClass:"level w-100 m-10"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("b-icon",{attrs:{icon:"shape-outline"}}),t._m(0)],1)]),i("div",{staticClass:"level-right"},[i("div",{staticClass:"level-item"},[i("ajout-categorie")],1)])])]),i("div",{staticClass:"columns m-10"},[i("div",{staticClass:"column"},[i("b-field",{attrs:{label:""}},[i("b-input",{attrs:{placeholder:"Rechercher une categorie",type:"search",icon:"magnify"},model:{value:t.nameCat,callback:function(e){t.nameCat=e},expression:"nameCat"}})],1)],1)]),i("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName,"trash-object-article":t.trashObjectArticle},on:{confirm:t.trashConfirm,annuler:t.trashCancel}}),i("modifier-categorie",{attrs:{"is-active":t.isComponentModalActive,"val-modif":t.valModification},on:{cancel:t.trashmodalmodifclose}}),i("b-table",{attrs:{"checked-rows":t.checkedRows,checkable:"",paginated:"","per-page":t.perPage,striped:!0,hoverable:!0,"default-sort":"name",data:t.categorie},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[i("b-table-column",{staticClass:"has-no-head-mobile is-image-cell",attrs:{label:"Image"}},[i("div",{staticClass:"image"},[i("img",{staticClass:"image is-96x96",attrs:{src:e.row.image}})])]),i("b-table-column",{attrs:{label:"Nom de la Catégorie",field:"libelle",sortable:""}},[t._v("\n            "+t._s(e.row.libelle)+"\n            ")]),i("b-table-column",{staticClass:"is-actions-cell",attrs:{label:"Actions","custom-key":"actions"}},[i("div",{staticClass:"buttons"},[i("button",{staticClass:"button is-small is-info",attrs:{type:"button"},on:{click:function(i){return t.trashModalModif(e.row)}}},[i("b-icon",{attrs:{icon:"account-edit",size:"is-small"}})],1),i("button",{staticClass:"button is-small is-danger",attrs:{type:"button"},on:{click:function(i){return t.trashModal(e.row)}}},[i("b-icon",{attrs:{icon:"trash-can",size:"is-small"}})],1)])])]}}])},[i("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[i("div",{staticClass:"content has-text-grey has-text-centered"},[t.isLoading?[i("p",[i("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),i("p",[t._v("Récupération des données...…")])]:[i("p",[i("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),i("p",[t._v("Rien n'est là…")])]],2)])])],1)])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("strong",[t._v("Table Catégorie")])])}],o=(i("8e6e"),i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("bd86")),n=i("1e1d"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{active:t.isModalActive,"has-modal-card":"","trap-focus":""},on:{"update:active":function(e){t.isModalActive=e}}},[i("div",{staticClass:"modal-card"},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v("Confirmer l'action")])]),i("section",{staticClass:"modal-card-body"},[i("p",[t._v("Cela supprimera définitivement "),i("b",[t._v(t._s(t.trashObjectName.libelle))])]),t.trashObjectArticle.length?i("p",[t._v("Cette catégorie contient des articles. "),i("br"),t._v("\n        Si vous supprimez cette catégorie , tous ses articles contenues seront aussi Supprimer\n      ")]):t._e(),i("p",[t._v("L'action ne peut pas être annulée.")])]),i("footer",{staticClass:"modal-card-foot"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.annuler}},[t._v("Fermer")]),i("button",{staticClass:"button is-danger",on:{click:t.confirmer}},[t._v("Supprimer")])])])])},r=[],l=i("4ee7"),d={name:"ModalBox",props:{isActive:{type:Boolean,default:!1},trashObjectName:{type:Object,default:function(){return{}}},trashObjectArticle:{type:Array,default:function(){return[]}}},data:function(){return{isModalActive:!1}},methods:{annuler:function(){this.$emit("cancel"),this.isModalActive=!1},confirmer:function(){if(this.trashObjectName.libelle){this.$compteur=0;while(this.$compteur<=this.trashObjectArticle.length-1)l["b"].ref("articles").child(this.trashObjectArticle[this.$compteur].id).remove(),this.$compteur++;l["b"].ref("categories").child(this.trashObjectName.id).remove(),this.$buefy.toast.open({message:"Modification de Categorie confirmée",type:"is-success",position:"is-bottom"})}this.$emit("confirm")}},destroyed:function(){l["b"].ref("categories").off(),l["b"].ref("Article").off()},watch:{isActive:function(t){this.isModalActive=t},isModalActive:function(t){t||this.annuler()},trashObjectName:function(t){this.trashObjectName=t},trashObjectArticle:function(t){this.trashObjectArticle=t}}},u=d,m=i("2877"),f=Object(m["a"])(u,c,r,!1,null,null,null),h=f.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a",{on:{click:function(e){t.isComponentModalActive=!0}}},[i("b-icon",{attrs:{icon:"plus-circle-outline",size:"is-large"}})],1),i("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":"","trap-focus":""},on:{"update:active":function(e){t.isComponentModalActive=e}}},[i("div",{staticClass:"modal-card"},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v("Création d'une catégorie")])]),i("section",{staticClass:"modal-card-body"},[i("b-field",{staticClass:"file"},[i("b-upload",{on:{input:t.saveImageUrl},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}},[i("a",{staticClass:"button is-info"},[i("b-icon",{attrs:{icon:"upload"}}),i("span",[t._v("Cliquer pour ajouter l'image de la catégorie")])],1)]),t.image?i("span",{staticClass:"file-name"},[t._v("\n                    "+t._s(t.image.name)+"\n                  ")]):t._e()],1),i("b-field",{attrs:{label:"Catégorie"}},[i("b-input",{model:{value:t.newCategorie,callback:function(e){t.newCategorie=e},expression:"newCategorie"}})],1)],1),i("footer",{staticClass:"modal-card-foot"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.annuler}},[t._v("Fermer")]),i("button",{staticClass:"button is-info",on:{click:t.addCategorie}},[t._v("Valider")])])])])],1)},p=[],v={props:["isActive"],data:function(){return{isComponentModalActive:!1,image:null,newCategorie:"",categorieImageUrl:null}},methods:{saveImageUrl:function(t){var e=this,i=t,a=new FileReader;a.readAsDataURL(i),a.onload=function(t){e.categorieImageUrl=t.target.result}},addCategorie:function(){if(this.newCategorie.length){var t=l["b"].ref("categories").push({libelle:this.newCategorie,image:this.categorieImageUrl}).key;l["b"].ref("categories").child(t).update({id:t}),this.newCategorie="",this.$buefy.toast.open({message:"Categorie enregistre",type:"is-success",position:"is-bottom"}),this.isComponentModalActive=!1}else this.$buefy.toast.open({message:"Champ vide",type:"is-danger",position:"is-bottom"})},annuler:function(){this.$emit("cancel"),this.isComponentModalActive=!1}},watch:{isActive:function(t){this.isComponentModalActive=t},isComponentModalActive:function(t){t||this.annuler()}}},g=v,C=Object(m["a"])(g,b,p,!1,null,null,null),A=C.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":"","trap-focus":""},on:{"update:active":function(e){t.isComponentModalActive=e}}},[i("div",{staticClass:"modal-card"},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v("Modifier une catégorie")])]),i("section",{staticClass:"modal-card-body"},[i("figure",{staticClass:"media-left"},[i("p",{staticClass:"image is-64x64"},[i("img",{attrs:{src:t.newCat.imgcat}})])]),i("b-field",{staticClass:"file"},[i("b-upload",{on:{input:t.imageAdd}},[i("a",{staticClass:"button is-info"},[i("b-icon",{attrs:{icon:"upload"}}),i("span",[t._v("Cliquer pour ajouter l'image de la catégorie")])],1)])],1),i("b-field",{attrs:{label:"Catégorie"}},[i("b-input",{model:{value:t.newCat.libelle,callback:function(e){t.$set(t.newCat,"libelle",e)},expression:"newCat.libelle"}})],1)],1),i("footer",{staticClass:"modal-card-foot"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.annuler}},[t._v("Fermer")]),i("button",{staticClass:"button is-info",on:{click:t.modifierCat}},[t._v("Valider")])])])])},y=[],M={props:["isActive","valModif"],data:function(){return{isComponentModalActive:!1,newCat:{},modif:{}}},methods:{annuler:function(){this.$emit("cancel")},confirmer:function(){this.$emit("confirmer")},imageAdd:function(t){var e=this,i=t,a=new FileReader;a.readAsDataURL(i),a.onload=function(t){e.newCat.imgcat=t.target.result}},modifierCat:function(){this.modif.libelle.length?(this.modif.libelle=this.newCat.libelle,this.modif.image=this.newCat.imgcat,l["b"].ref("categories").child(this.modif.id).update({libelle:this.modif.libelle,image:this.modif.image}),this.$buefy.toast.open({message:"Modification de Categorie confirmé",type:"is-success",position:"is-bottom"})):this.$buefy.toast.open({message:"veuillez renseigner le nom de la categorie ou selectionner une image",type:"is-danger",position:"is-bottom"})}},watch:{isActive:function(t){this.isComponentModalActive=t},isComponentModalActive:function(t){t||this.annuler()},valModif:function(t){this.modif=t,this.newCat={libelle:this.modif.libelle,imgcat:this.modif.image}}}},O=M,j=Object(m["a"])(O,w,y,!1,null,null,null),_=j.exports,k=i("2f62");function x(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function $(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?x(i,!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var R={name:"TableCategorie",components:{TitleBar:n["a"],ModalBox:h,AjoutCategorie:A,ModifierCategorie:_},data:function(){return{isComponentModalActive:!1,isModalActive:!1,trashObject:null,isLoading:!0,paginated:!0,perPage:10,checkedRows:[],valModification:{},nameCat:""}},computed:$({},Object(k["c"])(["getCategories","getArticles"]),{titleStack:function(){return["Admin","Table Catégorie"]},trashObjectName:function(){return this.trashObject?this.trashObject:{}},trashObjectArticle:function(){var t=this;return this.trashObject?this.getArticles.filter((function(e){return e.idCat===t.trashObject.id})):[]},categorie:function(){var t=this,e=this.getCategories;return this.nameCat.length&&(e=e.filter((function(e){return e.libelle.toLowerCase().includes(t.nameCat.toLowerCase())}))),e}}),methods:{trashModal:function(t){this.trashObject=t,this.isModalActive=!0},trashConfirm:function(){this.isModalActive=!1,this.$buefy.snackbar.open({message:"Confirmed",queue:!1})},trashCancel:function(){this.isModalActive=!1},trashModalModif:function(t){this.valModification=t,this.isComponentModalActive=!0},trashmodalmodifclose:function(){this.isComponentModalActive=!1}}},P=R,S=(i("a77d"),Object(m["a"])(P,a,s,!1,null,null,null));e["default"]=S.exports},d2c8:function(t,e,i){var a=i("aae3"),s=i("be13");t.exports=function(t,e,i){if(a(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(s(t))}}}]);
//# sourceMappingURL=tablecategorie.bdd75c07.js.map